<%- include('templates/header') %>

<h2 class="my-4">Users</h2>

<% if (error) { %>
  <div class="alert alert-danger"><%= error %></div>
<% } else { %>
  <ul class="list-group mb-4">
    <% users.forEach(u => { %>
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <strong><%= u.name %></strong> &lt;<%= u.email %>&gt;
          <span class="badge bg-info text-dark ms-2"><%= u.user_type %></span>
        </div>
        <div>
          <% if (u.user_type === 'user') { %>
            <a href="/admin/promote?email=<%= u.email %>" class="btn btn-sm btn-danger me-1">
              Promote to Admin
            </a>
          <% } else { %>
            <a href="/admin/demote?email=<%= u.email %>" class="btn btn-sm btn-success me-1">
              Demote to User
            </a>
          <% } %>
        </div>
      </li>
    <% }) %>
  </ul>
<% } %>

<%- include('templates/footer') %>
